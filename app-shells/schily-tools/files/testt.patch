# Fix [ a = a -a -t 0 ]
--- 1/sh/test.c
+++ 1/sh/test.c
@@ -416,12 +416,14 @@
 	ap--;
 	if ((p2 == 0) || (!eq(p2, "=") && !eq(p2, "!="))) {
 		if (eq(a, "-t")) {
+			unsigned char    *na;
+
 			if (ap >= ac)		/* no args */
 				return (isatty(1));
-			else if (eq((a = nxtarg(0)), "-a") || eq(a, "-o")) {
-				ap--;
+			na = nxtarg(0);
+			ap--;
+			if (eq(na, "-a") || eq(na, "-o"))
 				return (isatty(1));
-			}
 		}
 		if (a[0] == '-' && a[2] == '\0' &&
 		    strchr(test_unops, a[1]))
