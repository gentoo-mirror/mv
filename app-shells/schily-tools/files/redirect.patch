# See usenet <nkdjfb$bn1$1@news.albasani.net>
--- 1/sh/bltin.c
+++ 1/sh/bltin.c
@@ -106,6 +106,7 @@
 	if ((type & SPC_BUILTIN) == 0)
 		flags |= noexit;
 #endif
+	type = hashdata(type);
 	fdindex = initio(t->treio, (type != SYSEXEC));
 #ifdef	DO_POSIX_FAILURE
 	flags = oflags;
@@ -113,7 +114,6 @@
 		goto out;
 #endif
 
-	type = hashdata(type);
 	switch (type) {
 
 	case SYSSUSP:
