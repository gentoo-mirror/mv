--- chklref.in
+++ chklref.in
@@ -57,10 +57,13 @@
 fi
 
 
-basetexfile=$(basename $1 .tex)
+basetexfile=${1##*/}
+basetexfile=${basetexfile#%.tex}
 echo "Running $latex_cmd on $basetexfile.tex to collect labels,"
 echo "references and environment declarations"
+$latex_cmd --interaction errorstopmode "${basetexfile}" >"$out" 2>&1
+rm -- "$basetexfile".tex.chk
 $latex_cmd --interaction errorstopmode --jobname "$basetexfile" \
     '\RequirePackage{chklref}\input' "{$basetexfile.tex}" &> $out
-$PERL $prefix/share/chklref/chkparser $basetexfile.tex.chk
-if (( ! $debug )) ; then rm $basetexfile.tex.chk; fi
+$PERL "$prefix"/share/chklref/chkparser "$basetexfile".tex.chk
+[ $debug -eq 0 ] || rm -- "$basetexfile".tex.chk
--- chklref.sty
+++ chklref.sty
@@ -135,11 +135,15 @@
      \CHK@redefine@{eqref}{ref}
      \CHK@redefine@{ref}{ref}
      \CHK@redefine@{label}{label}
+     \CHK@redefine@{citation}{citation}
+     \CHK@redefine@{bibcite}{bibcite}
 
   \else
     \ifchk@hyperref\else
       \CHK@redefine@{label}{label}
       \CHK@redefine@{ref}{ref}
+      \CHK@redefine@{citation}{citation}
+      \CHK@redefine@{bibcite}{bibcite}
     \fi
   \fi
 }
--- chkparser
+++ chkparser
@@ -77,7 +77,7 @@
 ## last 3 args are passed by reference and are modified
 sub chk_parse
 {
-    my ($txt, $entries, $refs, $labels) = @_;
+    my ($txt, $entries, $refs, $labels, $citations, $bibcites) = @_;
     my ($str, $begin, $end, $star, $labeled_env, $label, $file, $entry, $l);
 
 #     ## swap end and label commands in an array
@@ -105,6 +105,15 @@
         {
             push(@$refs, new_ref($1, $2, $3));
         }
+        elsif ($l =~ m/^citation (.+) line (\d+) file (.+)$/o)
+        {
+            foreach my $c (split(/\s*,\s*/, $1))
+            { ${$citations}{$c}=1 }
+        }
+        elsif ($l =~ m/^bibcite (.+) line (\d+) file (.+)$/o)
+        {
+            push(@$bibcites, $1);
+        }
         elsif ($l =~ m/^begin{$have_star_mode(\**)} line (\d+) file (.+)$/o)
         {
             $str         = $1;
@@ -237,6 +246,8 @@
 my @entries = ();
 my @refs    = ();
 my @labels  = ();
+my %citations = ();
+my @bibcites  = ();
 my $FIC;
 
 ## reads whole file to an array because label and end commands
@@ -245,7 +256,7 @@
 my @txt = <$FIC>;
 close($FIC);
 
-chk_parse(\@txt, \@entries, \@refs, \@labels);
+chk_parse(\@txt, \@entries, \@refs, \@labels, \%citations, \@bibcites);
 
 @labels = sort { $a->{line} cmp $b->{line} } @labels;
 @refs   = sort { $a->{str} cmp $b->{str} } @refs;
@@ -253,3 +264,9 @@
 star_label(\@entries);
 ##disp_msg( \@entries );
 unused_label(\@labels, $uniq_refs);
+    print "****************************
+** Uncited Bibliographies **
+****************************\n";
+for my $c (@bibcites) {
+	print("Unused bibliography entry: $c\n") unless exists ${citations}{$c}
+}
